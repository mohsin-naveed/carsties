<div style="margin-top:24px">
  <h2>Saved Listings</h2>
  <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

  <div *ngIf="!loading && !dataSource.data.length">No listings yet.</div>

  <div *ngIf="!loading && dataSource.data.length">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z1 mat-mdc-table">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Title </th>
        <td mat-cell *matCellDef="let l"> {{ l.title }} </td>
      </ng-container>

      <ng-container matColumnDef="make">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Make </th>
        <td mat-cell *matCellDef="let l"> {{ l.makeName || l.makeId }} </td>
      </ng-container>

      <ng-container matColumnDef="model">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Model </th>
        <td mat-cell *matCellDef="let l"> {{ l.modelName || l.modelId }} </td>
      </ng-container>

      <ng-container matColumnDef="generation">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Generation </th>
        <td mat-cell *matCellDef="let l"> {{ l.generationName || l.generationId }} </td>
      </ng-container>

      <ng-container matColumnDef="derivative">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Derivative </th>
        <td mat-cell *matCellDef="let l"> {{ l.derivativeName || l.derivativeId }} </td>
      </ng-container>

      <ng-container matColumnDef="variant">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Variant </th>
        <td mat-cell *matCellDef="let l"> {{ l.variantName || l.variantId }} </td>
      </ng-container>

      <ng-container matColumnDef="body">
        <th mat-header-cell *matHeaderCellDef> Body </th>
        <td mat-cell *matCellDef="let l"> {{ l.bodyTypeName || l.bodyTypeId }} </td>
      </ng-container>

      <ng-container matColumnDef="transmission">
        <th mat-header-cell *matHeaderCellDef> Trans </th>
        <td mat-cell *matCellDef="let l"> {{ l.transmissionName || l.transmissionId || '-' }} </td>
      </ng-container>

      <ng-container matColumnDef="fuel">
        <th mat-header-cell *matHeaderCellDef> Fuel </th>
        <td mat-cell *matCellDef="let l"> {{ l.fuelTypeName || l.fuelTypeId || '-' }} </td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align:right"> Price </th>
        <td mat-cell *matCellDef="let l" style="text-align:right"> {{ l.price | number:'1.0-0' }} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let l">
          <a [routerLink]="['/listings', l.id, 'edit']" mat-icon-button title="Edit">
            <mat-icon>edit</mat-icon>
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5,10,25,50]"></mat-paginator>
  </div>
</div>
