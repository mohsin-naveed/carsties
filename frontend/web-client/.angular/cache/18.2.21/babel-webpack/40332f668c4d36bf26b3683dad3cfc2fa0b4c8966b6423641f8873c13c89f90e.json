{"ast":null,"code":"import { inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { forkJoin } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment.development';\nimport * as i0 from \"@angular/core\";\nexport let ListingsApiService = /*#__PURE__*/(() => {\n  class ListingsApiService {\n    http = inject(HttpClient);\n    baseUrl = environment.apiBaseUrl;\n    catalogBaseUrl = environment.catalogApiBaseUrl;\n    // Reference data direct from CatalogService\n    getMakes() {\n      return this.http.get(`${this.catalogBaseUrl}/makes`);\n    }\n    getModels(makeId) {\n      const params = {};\n      if (makeId) params.makeId = makeId;\n      return this.http.get(`${this.catalogBaseUrl}/models`, {\n        params\n      });\n    }\n    getGenerations(modelId) {\n      const params = {};\n      if (modelId) params.modelId = modelId;\n      return this.http.get(`${this.catalogBaseUrl}/generations`, {\n        params\n      });\n    }\n    getDerivatives(modelId) {\n      const params = {};\n      if (modelId) params.modelId = modelId;\n      return this.http.get(`${this.catalogBaseUrl}/derivatives`, {\n        params\n      });\n    }\n    // Variants are filtered by generation in CatalogService\n    getVariantsByGeneration(generationId) {\n      const params = {\n        generationId\n      };\n      return this.http.get(`${this.catalogBaseUrl}/variants`, {\n        params\n      });\n    }\n    // Combine options from two endpoints\n    getOptions() {\n      return forkJoin({\n        varOpts: this.http.get(`${this.catalogBaseUrl}/variants/options`),\n        bodies: this.http.get(`${this.catalogBaseUrl}/derivatives/options`)\n      }).pipe(map(({\n        varOpts,\n        bodies\n      }) => ({\n        transmissions: varOpts.transmissions,\n        fuelTypes: varOpts.fuelTypes,\n        bodyTypes: bodies\n      })));\n    }\n    getVariantFeatures(variantId) {\n      return this.http.get(`${this.catalogBaseUrl}/variantfeatures`, {\n        params: {\n          variantId\n        }\n      });\n    }\n    getFeatures() {\n      return this.http.get(`${this.catalogBaseUrl}/features`);\n    }\n    // ListingService endpoints\n    getListings() {\n      return this.http.get(`${this.baseUrl}/listings`);\n    }\n    createListing(dto) {\n      return this.http.post(`${this.baseUrl}/listings`, dto);\n    }\n    uploadListingImages(listingId, files) {\n      const fd = new FormData();\n      for (const f of files) fd.append('files', f);\n      return this.http.post(`${this.baseUrl}/listings/${listingId}/images`, fd);\n    }\n    static ɵfac = function ListingsApiService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ListingsApiService)();\n    };\n    static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ListingsApiService,\n      factory: ListingsApiService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return ListingsApiService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}