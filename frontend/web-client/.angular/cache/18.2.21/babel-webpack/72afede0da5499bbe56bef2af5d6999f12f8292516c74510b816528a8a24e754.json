{"ast":null,"code":"import { inject, ElementRef } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { Router } from '@angular/router';\nimport { ListingsApiService } from '../listings/listings-api.service';\nimport { map, shareReplay } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/card\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/material/icon\";\nconst _c0 = [\"track\"];\nfunction ListingsCarouselComponent_mat_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 7);\n    i0.ɵɵlistener(\"click\", function ListingsCarouselComponent_mat_card_7_Template_mat_card_click_0_listener() {\n      const item_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.navigateTo(item_r3));\n    })(\"keyup.enter\", function ListingsCarouselComponent_mat_card_7_Template_mat_card_keyup_enter_0_listener() {\n      const item_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.navigateTo(item_r3));\n    });\n    i0.ɵɵelement(1, \"img\", 8);\n    i0.ɵɵelementStart(2, \"mat-card-content\", 9)(3, \"div\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"span\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 13);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate2(\"alt\", \"\", item_r3.makeName, \" \", item_r3.modelName, \" image\");\n    i0.ɵɵproperty(\"src\", (item_r3.images == null ? null : item_r3.images[0] == null ? null : item_r3.images[0].url) || \"assets/placeholder-car.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\"\", item_r3.makeName, \" \", item_r3.modelName, \" \\u2022 \", item_r3.year, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(8, 9, item_r3.price, \"1.0-0\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(11, 12, item_r3.mileage), \" mi\");\n  }\n}\nexport let ListingsCarouselComponent = /*#__PURE__*/(() => {\n  class ListingsCarouselComponent {\n    api = inject(ListingsApiService);\n    router = inject(Router);\n    track;\n    response$ = this.api.searchListings({\n      page: 1,\n      pageSize: 12,\n      sortBy: 'year',\n      sortDirection: 'desc'\n    }).pipe(shareReplay(1));\n    listings$ = this.response$.pipe(map(r => r.data));\n    ngAfterViewInit() {}\n    navigateTo(listing) {\n      this.router.navigate(['/listings', listing.id]);\n    }\n    scrollLeft() {\n      const el = this.track?.nativeElement;\n      if (!el) return;\n      el.scrollBy({\n        left: -el.clientWidth,\n        behavior: 'smooth'\n      });\n    }\n    scrollRight() {\n      const el = this.track?.nativeElement;\n      if (!el) return;\n      el.scrollBy({\n        left: el.clientWidth,\n        behavior: 'smooth'\n      });\n    }\n    static ɵfac = function ListingsCarouselComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ListingsCarouselComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ListingsCarouselComponent,\n      selectors: [[\"app-listings-carousel\"]],\n      viewQuery: function ListingsCarouselComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 7);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.track = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 12,\n      vars: 3,\n      consts: [[\"track\", \"\"], [1, \"carousel\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Previous\", 1, \"carousel__nav\", \"carousel__nav--left\", 3, \"click\"], [\"role\", \"region\", \"aria-label\", \"Latest listings\", 1, \"carousel__track\"], [1, \"carousel__items\"], [\"class\", \"listing-card\", \"tabindex\", \"0\", \"aria-label\", \"View listing details\", 3, \"click\", \"keyup.enter\", 4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Next\", 1, \"carousel__nav\", \"carousel__nav--right\", 3, \"click\"], [\"tabindex\", \"0\", \"aria-label\", \"View listing details\", 1, \"listing-card\", 3, \"click\", \"keyup.enter\"], [1, \"listing-card__image\", 3, \"src\", \"alt\"], [1, \"listing-card__content\"], [1, \"listing-card__title\"], [1, \"listing-card__meta\"], [1, \"listing-card__price\"], [1, \"listing-card__mileage\"]],\n      template: function ListingsCarouselComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function ListingsCarouselComponent_Template_button_click_1_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.scrollLeft());\n          });\n          i0.ɵɵelementStart(2, \"mat-icon\");\n          i0.ɵɵtext(3, \"chevron_left\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3, 0)(6, \"div\", 4);\n          i0.ɵɵtemplate(7, ListingsCarouselComponent_mat_card_7_Template, 12, 14, \"mat-card\", 5);\n          i0.ɵɵpipe(8, \"async\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ListingsCarouselComponent_Template_button_click_9_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.scrollRight());\n          });\n          i0.ɵɵelementStart(10, \"mat-icon\");\n          i0.ɵɵtext(11, \"chevron_right\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(8, 1, ctx.listings$));\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, i1.AsyncPipe, i1.DecimalPipe, MatCardModule, i2.MatCard, i2.MatCardContent, MatButtonModule, i3.MatIconButton, MatIconModule, i4.MatIcon],\n      styles: [\".carousel[_ngcontent-%COMP%]{position:relative}.carousel__track[_ngcontent-%COMP%]{overflow-x:auto;scroll-behavior:smooth}.carousel__items[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:calc((100% - 48px)/4);gap:16px;padding:8px 48px}.carousel__nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:2;background:#ffffffe6}.carousel__nav--left[_ngcontent-%COMP%]{left:8px}.carousel__nav--right[_ngcontent-%COMP%]{right:8px}.listing-card[_ngcontent-%COMP%]{cursor:pointer}.listing-card__image[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;border-top-left-radius:4px;border-top-right-radius:4px}.listing-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:8px}.listing-card__title[_ngcontent-%COMP%]{font-weight:600}.listing-card__meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.listing-card__price[_ngcontent-%COMP%]{color:#0f766e;font-weight:700}@media (max-width: 1199px){.carousel__items[_ngcontent-%COMP%]{grid-auto-columns:calc((100% - 32px) / 3)}}@media (max-width: 959px){.carousel__items[_ngcontent-%COMP%]{grid-auto-columns:calc((100% - 16px)/2)}}@media (max-width: 599px){.carousel__items[_ngcontent-%COMP%]{grid-auto-columns:100%;padding:8px 40px}}\"],\n      changeDetection: 0\n    });\n  }\n  return ListingsCarouselComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}