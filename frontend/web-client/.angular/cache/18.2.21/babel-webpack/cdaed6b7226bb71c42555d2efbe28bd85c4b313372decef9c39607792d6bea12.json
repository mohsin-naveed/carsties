{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ListingsApiService } from '../listings/listings-api.service';\nimport { BehaviorSubject, combineLatest, forkJoin, of } from 'rxjs';\nimport { map, switchMap, shareReplay, distinctUntilChanged, debounceTime, catchError, startWith, tap, take } from 'rxjs/operators';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatCardModule } from '@angular/material/card';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/icon\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@angular/material/progress-bar\";\nimport * as i6 from \"@angular/router\";\nconst _c0 = () => [];\nconst _c1 = a0 => [\"/listings\", a0];\nfunction SearchComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r1.value);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(option_r1.label);\n  }\n}\nfunction SearchComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_44_Template_input_change_2_listener() {\n      const m_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedMakeId$.next(m_r3.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedMakeId$) === m_r3.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(m_r3.name);\n  }\n}\nfunction SearchComponent_div_62_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_62_Template_input_change_2_listener() {\n      const m_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedModelId$.next(m_r6.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedModelId$) === m_r6.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(m_r6.name);\n  }\n}\nfunction SearchComponent_div_80_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_80_Template_input_change_2_listener() {\n      const v_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedVariantId$.next(v_r8.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const v_r8 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedVariantId$) === v_r8.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(v_r8.name);\n  }\n}\nfunction SearchComponent_div_98_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_98_Template_input_change_2_listener() {\n      const t_r10 = i0.ɵɵrestoreView(_r9).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedTransmissionId$.next(t_r10.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const t_r10 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedTransmissionId$) === t_r10.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(t_r10.name);\n  }\n}\nfunction SearchComponent_div_116_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_116_Template_input_change_2_listener() {\n      const b_r12 = i0.ɵɵrestoreView(_r11).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedBodyTypeId$.next(b_r12.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const b_r12 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedBodyTypeId$) === b_r12.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(b_r12.name);\n  }\n}\nfunction SearchComponent_div_134_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"label\", 26)(2, \"input\", 27);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"change\", function SearchComponent_div_134_Template_input_change_2_listener() {\n      const f_r14 = i0.ɵɵrestoreView(_r13).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectedFuelTypeId$.next(f_r14.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 29);\n    i0.ɵɵelement(6, \"path\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const f_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", i0.ɵɵpipeBind1(3, 2, ctx_r3.selectedFuelTypeId$) === f_r14.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(f_r14.name);\n  }\n}\nfunction SearchComponent_mat_card_138_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 48);\n  }\n  if (rf & 2) {\n    const car_r15 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", car_r15.images[0].thumbUrl || car_r15.images[0].url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SearchComponent_mat_card_138_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"directions_car\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SearchComponent_mat_card_138_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 41)(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 42);\n    i0.ɵɵtemplate(7, SearchComponent_mat_card_138_img_7_Template, 1, 1, \"img\", 43)(8, SearchComponent_mat_card_138_div_8_Template, 3, 0, \"div\", 44);\n    i0.ɵɵelementStart(9, \"span\", 45);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"mat-card-content\")(13, \"div\", 46)(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"span\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"mat-card-actions\")(23, \"a\", 47);\n    i0.ɵɵtext(24, \"View Details\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const car_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(18, _c1, car_r15.id))(\"queryParamsHandling\", \"preserve\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(car_r15.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", car_r15.makeName || car_r15.makeId, \" \\u00B7 \", car_r15.modelName || car_r15.modelId, \" \\u00B7 \", car_r15.year, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", car_r15.images == null ? null : car_r15.images.length);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !(car_r15.images == null ? null : car_r15.images.length));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"R \", i0.ɵɵpipeBind2(11, 15, car_r15.price, \"1.0-0\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Variant: \", car_r15.variantName || car_r15.variantId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Body: \", car_r15.bodyTypeName || car_r15.bodyTypeId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Trans: \", car_r15.transmissionName || car_r15.transmissionId || \"-\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Fuel: \", car_r15.fuelTypeName || car_r15.fuelTypeId || \"-\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(20, _c1, car_r15.id))(\"queryParamsHandling\", \"preserve\");\n  }\n}\nfunction SearchComponent_div_140_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"div\", 51)(2, \"h3\");\n    i0.ɵɵtext(3, \"No cars found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Try adjusting your filters to see more results.\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SearchComponent_div_143_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"button\", 53);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_143_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.prevPage());\n    });\n    i0.ɵɵtext(4, \"Previous\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 54);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"async\");\n    i0.ɵɵpipe(8, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 53);\n    i0.ɵɵpipe(10, \"async\");\n    i0.ɵɵpipe(11, \"async\");\n    i0.ɵɵpipe(12, \"async\");\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_143_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.nextPage());\n    });\n    i0.ɵɵtext(13, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    let tmp_3_0;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ((tmp_1_0 = i0.ɵɵpipeBind1(2, 4, ctx_r3.page$)) !== null && tmp_1_0 !== undefined ? tmp_1_0 : 1) === 1 || i0.ɵɵpipeBind1(3, 6, ctx_r3.loading$));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"Page \", i0.ɵɵpipeBind1(7, 8, ctx_r3.page$), \" of \", i0.ɵɵpipeBind1(8, 10, ctx_r3.totalPages$), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ((tmp_3_0 = i0.ɵɵpipeBind1(10, 12, ctx_r3.page$)) !== null && tmp_3_0 !== undefined ? tmp_3_0 : 1) === ((tmp_3_0 = i0.ɵɵpipeBind1(11, 14, ctx_r3.totalPages$)) !== null && tmp_3_0 !== undefined ? tmp_3_0 : 1) || i0.ɵɵpipeBind1(12, 16, ctx_r3.loading$));\n  }\n}\nfunction SearchComponent_mat_progress_bar_145_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 55);\n  }\n}\nfunction SearchComponent_div_147_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 59);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r18 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(f_r18);\n  }\n}\nfunction SearchComponent_div_147_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtemplate(1, SearchComponent_div_147_span_1_Template, 2, 1, \"span\", 57);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementStart(3, \"button\", 58);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_147_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r3 = i0.ɵɵnextContext();\n      ctx_r3.selectedMakeId$.next(null);\n      ctx_r3.selectedModelId$.next(null);\n      ctx_r3.selectedVariantId$.next(null);\n      ctx_r3.selectedTransmissionId$.next(null);\n      ctx_r3.selectedBodyTypeId$.next(null);\n      return i0.ɵɵresetView(ctx_r3.selectedFuelTypeId$.next(null));\n    });\n    i0.ɵɵtext(4, \"Clear all\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx_r3.activeFilters$));\n  }\n}\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    api = inject(ListingsApiService);\n    route = inject(ActivatedRoute);\n    router = inject(Router);\n    // Sorting options (used in template)\n    sortOptions = [{\n      label: 'Price: Low to High',\n      value: 'price-asc'\n    }, {\n      label: 'Price: High to Low',\n      value: 'price-desc'\n    }, {\n      label: 'Year: Newest',\n      value: 'year-desc'\n    }, {\n      label: 'Year: Oldest',\n      value: 'year-asc'\n    }];\n    // Filter subjects\n    selectedMakeId$ = new BehaviorSubject(null);\n    selectedModelId$ = new BehaviorSubject(null);\n    selectedVariantId$ = new BehaviorSubject(null);\n    selectedTransmissionId$ = new BehaviorSubject(null);\n    selectedBodyTypeId$ = new BehaviorSubject(null);\n    selectedFuelTypeId$ = new BehaviorSubject(null);\n    // Sorting & pagination subjects\n    sort$ = new BehaviorSubject('price-asc');\n    page$ = new BehaviorSubject(1);\n    pageSize$ = new BehaviorSubject(12);\n    // Loading indicator\n    loading$ = new BehaviorSubject(true);\n    // Reference data\n    makes$ = this.api.getMakes().pipe(shareReplay(1));\n    options$ = this.api.getOptions().pipe(shareReplay(1));\n    transmissions$ = this.options$.pipe(map(o => o.transmissions));\n    bodyTypes$ = this.options$.pipe(map(o => o.bodyTypes));\n    fuelTypes$ = this.options$.pipe(map(o => o.fuelTypes));\n    // Models depend on selected make\n    models$ = this.selectedMakeId$.pipe(distinctUntilChanged(), switchMap(makeId => makeId ? this.api.getModels(makeId) : of([])), shareReplay(1));\n    // Variants depend on selected model\n    variants$ = this.selectedModelId$.pipe(distinctUntilChanged(), switchMap(modelId => {\n      if (!modelId) return of([]);\n      return this.api.getGenerations(modelId).pipe(switchMap(gens => gens && gens.length ? forkJoin(gens.map(g => this.api.getVariantsByGeneration(g.id))) : of([])), map(results => Array.isArray(results) ? results.flat() : []));\n    }), shareReplay(1));\n    // Query params stream\n    query$ = combineLatest([this.selectedMakeId$, this.selectedModelId$, this.selectedVariantId$, this.selectedTransmissionId$, this.selectedBodyTypeId$, this.selectedFuelTypeId$, this.sort$, this.page$, this.pageSize$]).pipe(debounceTime(25), shareReplay(1));\n    // Results stream\n    results$ = this.query$.pipe(tap(() => this.loading$.next(true)), switchMap(([makeId, modelId, variantId, transmissionId, bodyTypeId, fuelTypeId, sort, page, pageSize]) => {\n      const [sortBy, sortDirection] = this.mapSort(sort);\n      const params = {\n        makeId: makeId ?? undefined,\n        modelId: modelId ?? undefined,\n        variantId: variantId ?? undefined,\n        transmissionId: transmissionId ?? undefined,\n        bodyTypeId: bodyTypeId ?? undefined,\n        fuelTypeId: fuelTypeId ?? undefined,\n        page,\n        pageSize,\n        sortBy,\n        sortDirection\n      };\n      return this.api.searchListings(params).pipe(catchError(() => this.api.getListings({\n        makeId,\n        modelId,\n        variantId,\n        transmissionId,\n        bodyTypeId,\n        fuelTypeId\n      }).pipe(map(xs => ({\n        data: xs,\n        totalCount: xs.length,\n        totalPages: Math.max(1, Math.ceil(xs.length / pageSize)),\n        currentPage: page,\n        pageSize\n      })))));\n    }), tap(() => this.loading$.next(false)), shareReplay(1));\n    // Derived UI streams\n    listings$ = this.results$.pipe(map(r => r.data));\n    totalCount$ = this.results$.pipe(map(r => r.totalCount));\n    totalPages$ = this.results$.pipe(map(r => r.totalPages));\n    // Active filter labels (for chips)\n    activeFilters$ = combineLatest([this.selectedMakeId$, this.makes$.pipe(startWith([])), this.selectedModelId$, this.models$.pipe(startWith([])), this.selectedVariantId$, this.variants$.pipe(startWith([])), this.selectedTransmissionId$, this.transmissions$.pipe(startWith([])), this.selectedBodyTypeId$, this.bodyTypes$.pipe(startWith([])), this.selectedFuelTypeId$, this.fuelTypes$.pipe(startWith([]))]).pipe(map(([mkId, makes, mdId, models, vrId, variants, trId, transmissions, btId, bodies, fuId, fuels]) => {\n      const labelOr = (id, list, fallback) => id ? list.find(x => x.id === id)?.name ?? fallback : null;\n      const labels = [labelOr(mkId, makes, 'Make'), labelOr(mdId, models, 'Model'), labelOr(vrId, variants, 'Variant'), labelOr(trId, transmissions, 'Transmission'), labelOr(btId, bodies, 'Body'), labelOr(fuId, fuels, 'Fuel')].filter(Boolean);\n      return labels;\n    }), shareReplay(1));\n    constructor() {\n      // Seed from URL\n      this.route.queryParamMap.subscribe(q => {\n        const num = k => {\n          const v = q.get(k);\n          return v ? Number(v) : null;\n        };\n        this.selectedMakeId$.next(num('make'));\n        this.selectedModelId$.next(num('model'));\n        this.selectedVariantId$.next(num('variant'));\n        this.selectedTransmissionId$.next(num('trans'));\n        this.selectedBodyTypeId$.next(num('body'));\n        this.selectedFuelTypeId$.next(num('fuel'));\n        const s = q.get('sort');\n        if (s) this.sort$.next(s);\n        const p = q.get('page');\n        this.page$.next(p ? Number(p) : 1);\n      });\n      // Persist to URL on changes\n      combineLatest([this.selectedMakeId$, this.selectedModelId$, this.selectedVariantId$, this.selectedTransmissionId$, this.selectedBodyTypeId$, this.selectedFuelTypeId$, this.sort$, this.page$]).pipe(debounceTime(50)).subscribe(([mk, md, vr, tr, bt, fu, sort, page]) => {\n        const qp = {\n          make: mk,\n          model: md,\n          variant: vr,\n          trans: tr,\n          body: bt,\n          fuel: fu,\n          sort,\n          page\n        };\n        Object.keys(qp).forEach(k => qp[k] === null && delete qp[k]);\n        this.router.navigate([], {\n          queryParams: qp,\n          queryParamsHandling: 'merge'\n        });\n      });\n      // Reset to first page when filters or sort change\n      combineLatest([this.selectedMakeId$, this.selectedModelId$, this.selectedVariantId$, this.selectedTransmissionId$, this.selectedBodyTypeId$, this.selectedFuelTypeId$, this.sort$]).pipe(debounceTime(50)).subscribe(() => this.page$.next(1));\n    }\n    mapSort(v) {\n      switch (v) {\n        case 'price-asc':\n          return ['price', 'asc'];\n        case 'price-desc':\n          return ['price', 'desc'];\n        case 'year-asc':\n          return ['year', 'asc'];\n        case 'year-desc':\n          return ['year', 'desc'];\n        default:\n          return ['price', 'asc'];\n      }\n    }\n    prevPage() {\n      combineLatest([this.page$, this.totalPages$]).pipe(take(1)).subscribe(([p]) => {\n        if (p > 1) this.page$.next(p - 1);\n      });\n    }\n    nextPage() {\n      combineLatest([this.page$, this.totalPages$]).pipe(take(1)).subscribe(([p, t]) => {\n        if (p < t) this.page$.next(p + 1);\n      });\n    }\n    static ɵfac = function SearchComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SearchComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SearchComponent,\n      selectors: [[\"app-search\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 149,\n      vars: 67,\n      consts: [[1, \"find-car-container\"], [1, \"mobile-header-buttons\"], [1, \"mobile-filter-btn\"], [1, \"mobile-sort-btn\"], [1, \"header-section\"], [1, \"results-info\"], [1, \"results-title\"], [1, \"results-count\"], [1, \"sort-section\"], [\"for\", \"sort-select\", 1, \"sort-label\"], [\"id\", \"sort-select\", 1, \"sort-select\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"main-content\"], [1, \"filter-sidebar\"], [1, \"filter-header\"], [1, \"filter-title\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", 1, \"filter-icon\"], [\"d\", \"M22 3H2L10 12.46V19L14 21V12.46L22 3Z\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [1, \"filter-content\"], [1, \"filter-section\"], [1, \"section-header\"], [1, \"section-title-container\"], [1, \"section-title\"], [1, \"section-content\", \"expanded\"], [1, \"options-container\"], [1, \"filter-option\"], [1, \"option-label\"], [\"type\", \"checkbox\", 1, \"filter-checkbox\", 3, \"change\", \"checked\"], [1, \"custom-checkbox\"], [\"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", 1, \"check-icon\"], [\"d\", \"M20 6L9 17L4 12\", \"stroke\", \"currentColor\", \"stroke-width\", \"3\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [1, \"option-text\"], [\"class\", \"filter-option\", 4, \"ngFor\", \"ngForOf\"], [1, \"car-results\"], [1, \"car-grid\"], [\"class\", \"car-card\", \"title\", \"View details\", 3, \"routerLink\", \"queryParamsHandling\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"no-results\", 4, \"ngIf\"], [\"class\", \"pagination\", 4, \"ngIf\"], [\"mode\", \"indeterminate\", 4, \"ngIf\"], [\"class\", \"active-filters\", 4, \"ngIf\"], [3, \"value\"], [\"title\", \"View details\", 1, \"car-card\", 3, \"routerLink\", \"queryParamsHandling\"], [1, \"thumb-wrap\"], [\"class\", \"thumb\", \"alt\", \"car image\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"thumb placeholder\", 4, \"ngIf\"], [1, \"price-badge\"], [1, \"specs\"], [\"mat-button\", \"\", 3, \"routerLink\", \"queryParamsHandling\"], [\"alt\", \"car image\", 1, \"thumb\", 3, \"src\"], [1, \"thumb\", \"placeholder\"], [1, \"no-results\"], [1, \"no-results-content\"], [1, \"pagination\"], [1, \"page-btn\", 3, \"click\", \"disabled\"], [1, \"page-info\"], [\"mode\", \"indeterminate\"], [1, \"active-filters\"], [\"class\", \"chip\", 4, \"ngFor\", \"ngForOf\"], [1, \"clear-filters\", 3, \"click\"], [1, \"chip\"]],\n      template: function SearchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n          i0.ɵɵtext(3, \"Filters\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵtext(5, \"Sort\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"h2\", 6);\n          i0.ɵɵtext(9, \"Find Your Perfect Car\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"p\", 7);\n          i0.ɵɵtext(11);\n          i0.ɵɵpipe(12, \"async\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"div\", 8)(14, \"label\", 9);\n          i0.ɵɵtext(15, \"Sort by:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"select\", 10);\n          i0.ɵɵpipe(17, \"async\");\n          i0.ɵɵlistener(\"ngModelChange\", function SearchComponent_Template_select_ngModelChange_16_listener($event) {\n            return ctx.sort$.next($event);\n          });\n          i0.ɵɵtemplate(18, SearchComponent_option_18_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(19, \"div\", 12)(20, \"aside\", 13)(21, \"div\", 13)(22, \"div\", 14)(23, \"h3\", 15);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(24, \"svg\", 16);\n          i0.ɵɵelement(25, \"path\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(26, \" Filters \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(27, \"div\", 18)(28, \"div\", 19)(29, \"div\", 20)(30, \"div\", 21)(31, \"h4\", 22);\n          i0.ɵɵtext(32, \"Make\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(33, \"div\", 23)(34, \"div\", 24)(35, \"div\", 25)(36, \"label\", 26)(37, \"input\", 27);\n          i0.ɵɵpipe(38, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_37_listener() {\n            return ctx.selectedMakeId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(40, \"svg\", 29);\n          i0.ɵɵelement(41, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(42, \"span\", 31);\n          i0.ɵɵtext(43, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(44, SearchComponent_div_44_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(45, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(46, \"div\", 19)(47, \"div\", 20)(48, \"div\", 21)(49, \"h4\", 22);\n          i0.ɵɵtext(50, \"Model\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(51, \"div\", 23)(52, \"div\", 24)(53, \"div\", 25)(54, \"label\", 26)(55, \"input\", 27);\n          i0.ɵɵpipe(56, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_55_listener() {\n            return ctx.selectedModelId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(58, \"svg\", 29);\n          i0.ɵɵelement(59, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(60, \"span\", 31);\n          i0.ɵɵtext(61, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(62, SearchComponent_div_62_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(63, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(64, \"div\", 19)(65, \"div\", 20)(66, \"div\", 21)(67, \"h4\", 22);\n          i0.ɵɵtext(68, \"Variant\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(69, \"div\", 23)(70, \"div\", 24)(71, \"div\", 25)(72, \"label\", 26)(73, \"input\", 27);\n          i0.ɵɵpipe(74, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_73_listener() {\n            return ctx.selectedVariantId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(75, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(76, \"svg\", 29);\n          i0.ɵɵelement(77, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(78, \"span\", 31);\n          i0.ɵɵtext(79, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(80, SearchComponent_div_80_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(81, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(82, \"div\", 19)(83, \"div\", 20)(84, \"div\", 21)(85, \"h4\", 22);\n          i0.ɵɵtext(86, \"Transmission\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(87, \"div\", 23)(88, \"div\", 24)(89, \"div\", 25)(90, \"label\", 26)(91, \"input\", 27);\n          i0.ɵɵpipe(92, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_91_listener() {\n            return ctx.selectedTransmissionId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(93, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(94, \"svg\", 29);\n          i0.ɵɵelement(95, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(96, \"span\", 31);\n          i0.ɵɵtext(97, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(98, SearchComponent_div_98_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(99, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(100, \"div\", 19)(101, \"div\", 20)(102, \"div\", 21)(103, \"h4\", 22);\n          i0.ɵɵtext(104, \"Body Type\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(105, \"div\", 23)(106, \"div\", 24)(107, \"div\", 25)(108, \"label\", 26)(109, \"input\", 27);\n          i0.ɵɵpipe(110, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_109_listener() {\n            return ctx.selectedBodyTypeId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(111, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(112, \"svg\", 29);\n          i0.ɵɵelement(113, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(114, \"span\", 31);\n          i0.ɵɵtext(115, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(116, SearchComponent_div_116_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(117, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(118, \"div\", 19)(119, \"div\", 20)(120, \"div\", 21)(121, \"h4\", 22);\n          i0.ɵɵtext(122, \"Fuel Type\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(123, \"div\", 23)(124, \"div\", 24)(125, \"div\", 25)(126, \"label\", 26)(127, \"input\", 27);\n          i0.ɵɵpipe(128, \"async\");\n          i0.ɵɵlistener(\"change\", function SearchComponent_Template_input_change_127_listener() {\n            return ctx.selectedFuelTypeId$.next(null);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(129, \"span\", 28);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(130, \"svg\", 29);\n          i0.ɵɵelement(131, \"path\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(132, \"span\", 31);\n          i0.ɵɵtext(133, \"All\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(134, SearchComponent_div_134_Template, 9, 4, \"div\", 32);\n          i0.ɵɵpipe(135, \"async\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(136, \"main\", 33)(137, \"div\", 34);\n          i0.ɵɵtemplate(138, SearchComponent_mat_card_138_Template, 25, 22, \"mat-card\", 35);\n          i0.ɵɵpipe(139, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(140, SearchComponent_div_140_Template, 6, 0, \"div\", 36);\n          i0.ɵɵpipe(141, \"async\");\n          i0.ɵɵpipe(142, \"async\");\n          i0.ɵɵtemplate(143, SearchComponent_div_143_Template, 14, 18, \"div\", 37);\n          i0.ɵɵpipe(144, \"async\");\n          i0.ɵɵtemplate(145, SearchComponent_mat_progress_bar_145_Template, 1, 0, \"mat-progress-bar\", 38);\n          i0.ɵɵpipe(146, \"async\");\n          i0.ɵɵtemplate(147, SearchComponent_div_147_Template, 5, 3, \"div\", 39);\n          i0.ɵɵpipe(148, \"async\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          let tmp_4_0;\n          let tmp_6_0;\n          let tmp_8_0;\n          let tmp_10_0;\n          let tmp_12_0;\n          let tmp_14_0;\n          let tmp_15_0;\n          let tmp_16_0;\n          let tmp_17_0;\n          let tmp_19_0;\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate1(\"Showing \", (tmp_0_0 = i0.ɵɵpipeBind1(12, 20, ctx.totalCount$)) !== null && tmp_0_0 !== undefined ? tmp_0_0 : 0, \" cars\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind1(17, 22, ctx.sort$));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.sortOptions);\n          i0.ɵɵadvance(19);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(38, 24, ctx.selectedMakeId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_4_0 = i0.ɵɵpipeBind1(45, 26, ctx.makes$)) !== null && tmp_4_0 !== undefined ? tmp_4_0 : i0.ɵɵpureFunction0(60, _c0));\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(56, 28, ctx.selectedModelId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_6_0 = i0.ɵɵpipeBind1(63, 30, ctx.models$)) !== null && tmp_6_0 !== undefined ? tmp_6_0 : i0.ɵɵpureFunction0(61, _c0));\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(74, 32, ctx.selectedVariantId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_8_0 = i0.ɵɵpipeBind1(81, 34, ctx.variants$)) !== null && tmp_8_0 !== undefined ? tmp_8_0 : i0.ɵɵpureFunction0(62, _c0));\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(92, 36, ctx.selectedTransmissionId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_10_0 = i0.ɵɵpipeBind1(99, 38, ctx.transmissions$)) !== null && tmp_10_0 !== undefined ? tmp_10_0 : i0.ɵɵpureFunction0(63, _c0));\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(110, 40, ctx.selectedBodyTypeId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_12_0 = i0.ɵɵpipeBind1(117, 42, ctx.bodyTypes$)) !== null && tmp_12_0 !== undefined ? tmp_12_0 : i0.ɵɵpureFunction0(64, _c0));\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"checked\", !i0.ɵɵpipeBind1(128, 44, ctx.selectedFuelTypeId$));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_14_0 = i0.ɵɵpipeBind1(135, 46, ctx.fuelTypes$)) !== null && tmp_14_0 !== undefined ? tmp_14_0 : i0.ɵɵpureFunction0(65, _c0));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", (tmp_15_0 = i0.ɵɵpipeBind1(139, 48, ctx.listings$)) !== null && tmp_15_0 !== undefined ? tmp_15_0 : i0.ɵɵpureFunction0(66, _c0));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(141, 50, ctx.loading$) && ((tmp_16_0 = i0.ɵɵpipeBind1(142, 52, ctx.totalCount$)) !== null && tmp_16_0 !== undefined ? tmp_16_0 : 0) === 0);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_17_0 = i0.ɵɵpipeBind1(144, 54, ctx.totalPages$)) !== null && tmp_17_0 !== undefined ? tmp_17_0 : 1) > 1);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(146, 56, ctx.loading$));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", (tmp_19_0 = i0.ɵɵpipeBind1(148, 58, ctx.activeFilters$)) == null ? null : tmp_19_0.length);\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, i1.NgIf, i1.AsyncPipe, i1.DecimalPipe, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, MatFormFieldModule, MatSelectModule, MatIconModule, i3.MatIcon, MatCardModule, i4.MatCard, i4.MatCardActions, i4.MatCardContent, i4.MatCardHeader, i4.MatCardSubtitle, i4.MatCardTitle, MatProgressBarModule, i5.MatProgressBar, RouterModule, i6.RouterLink],\n      styles: [\".find-car-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:16px}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}.results-title[_ngcontent-%COMP%]{margin:0;font-weight:600}.results-count[_ngcontent-%COMP%]{color:#666;margin:4px 0 0}.sort-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.main-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr;gap:16px}.filter-sidebar[_ngcontent-%COMP%]{position:sticky;top:12px;align-self:start}.options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:8px}.filter-option[_ngcontent-%COMP%]{padding:6px 8px;border-radius:6px}.option-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.check-icon[_ngcontent-%COMP%]{display:none}.car-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}@media (max-width: 992px){.car-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.main-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 640px){.car-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.car-card[_ngcontent-%COMP%]{cursor:pointer}.thumb-wrap[_ngcontent-%COMP%]{position:relative}.thumb[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;border-radius:8px;border:1px solid #e0e0e0}.thumb.placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f3f4f6;border:1px dashed #ddd;height:180px;border-radius:8px}.price-badge[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;background:#111827;color:#fff;padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px}.specs[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:6px;color:#444}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin-top:16px}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background:#fff;border-radius:6px}.page-btn[disabled][_ngcontent-%COMP%]{opacity:.5}.active-filters[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:12px 0}.chip[_ngcontent-%COMP%]{background:#eef2ff;color:#3730a3;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid #c7d2fe}.clear-filters[_ngcontent-%COMP%]{background:transparent;border:none;color:#2563eb;cursor:pointer}.find-car-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.mobile-header-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:0 8px}.mobile-filter-btn[_ngcontent-%COMP%], .mobile-sort-btn[_ngcontent-%COMP%]{flex:1 1 50%;padding:12px 0;font-size:16px;font-weight:600;border:none;background:#f8f9fa;color:#007bff;border-radius:8px;margin:0 4px;box-shadow:0 1px 3px #0000000a}.mobile-filter-btn[_ngcontent-%COMP%]{text-align:left}.mobile-sort-btn[_ngcontent-%COMP%]{text-align:right}.header-section[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.mobile-header-buttons[_ngcontent-%COMP%]{display:none}.header-section[_ngcontent-%COMP%]{display:flex}}.header-section[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 2px 4px #0000001a}.results-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:700;color:#2c3e50}.results-count[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:14px}.sort-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sort-label[_ngcontent-%COMP%]{font-weight:600;color:#495057}.sort-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #dee2e6;border-radius:6px;font-size:14px;background-color:#fff;cursor:pointer;transition:all .3s ease}.sort-select[_ngcontent-%COMP%]:hover{border-color:#007bff}.sort-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.main-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:30px}.filter-sidebar[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;height:fit-content;position:sticky;top:20px}@media (max-width: 767px){.filter-sidebar[_ngcontent-%COMP%]{display:none!important}}.car-results[_ngcontent-%COMP%]{min-height:600px}.car-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-bottom:40px}.no-results[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:400px;text-align:center}.no-results-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#6c757d;margin-bottom:16px}.no-results-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#adb5bd;font-size:16px}.car-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;cursor:pointer}.thumb-wrap[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:16/9}.thumb[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.thumb.placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f2f2f2;color:#777;width:100%;height:100%}.price-badge[_ngcontent-%COMP%]{position:absolute;right:8px;top:8px;background:#000000b3;color:#fff;padding:4px 8px;border-radius:12px;font-weight:600}.specs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.full[_ngcontent-%COMP%]{width:100%}.muted[_ngcontent-%COMP%]{color:#0009}.filter-sidebar[_ngcontent-%COMP%]   .filter-sidebar[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden}.filter-header[_ngcontent-%COMP%]{padding:20px;border-bottom:2px solid #e9ecef;background:linear-gradient(135deg,#007bff,#0056b3);color:#fff}.filter-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 8px;font-size:18px;font-weight:700}.filter-icon[_ngcontent-%COMP%]{color:#ffffffe6}.filter-content[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto}.filter-section[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef}.filter-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;cursor:pointer;background:#f8f9fa;transition:all .3s ease;border-bottom:1px solid #e9ecef}.section-title[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:#2c3e50}.section-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.section-content.expanded[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.options-container[_ngcontent-%COMP%]{padding:16px 20px}.filter-option[_ngcontent-%COMP%]{margin-bottom:12px}.option-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:14px;line-height:1.4;transition:all .3s ease;padding:4px 0}.filter-checkbox[_ngcontent-%COMP%]{display:none}.custom-checkbox[_ngcontent-%COMP%]{position:relative;width:18px;height:18px;border:2px solid #dee2e6;border-radius:3px;background:#fff;display:flex;align-items:center;justify-content:center;transition:all .3s ease;flex-shrink:0}.filter-checkbox[_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]{background:#007bff;border-color:#007bff}.filter-checkbox[_ngcontent-%COMP%]:checked + .custom-checkbox[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.check-icon[_ngcontent-%COMP%]{color:#fff;opacity:0;transform:scale(0);transition:all .3s ease}.option-text[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:space-between;gap:8px}\"],\n      changeDetection: 0\n    });\n  }\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}